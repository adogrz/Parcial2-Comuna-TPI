<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PC Store - Contacto</title>
  <script src="js/head.js" defer></script>
  <script src="js/nav.js" defer></script>
  <style>
    :root{
      --bg:#0f172a;        
      --paper:#f5efe6;     
      --ink:#222;
      --muted:#6b7280;
      --brand:#0ea5e9;    
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      color:var(--ink);
      background:linear-gradient(#0f172a,#1f2937) no-repeat 0 0/100% 160px, var(--paper);
    }
    header{
      padding:28px 16px 56px;
      color:#e5f2ff;
      text-align:center;
    }
    header h1{margin:0;font-weight:800;letter-spacing:.5px}

    .wrap{max-width:1100px;margin:-40px auto 64px;padding:0 16px}
    .card{
      background:#fff;border:1px solid #e5e7eb;border-radius:14px;box-shadow:0 10px 25px rgba(2,6,23,.08);
    }
    .contact-grid{
      display:grid;gap:16px;
      grid-template-columns:1.2fr .8fr;
    }
    @media (max-width:900px){ .contact-grid{ grid-template-columns:1fr } }

    /* Mapa */
    .map{position:relative;min-height:360px;border-radius:14px;overflow:hidden}
    .map iframe{border:0;width:100%;height:100%}
    .pin{
      position:absolute;left:16px;top:16px;background:#fff;border:1px solid #e5e7eb;border-radius:10px;
      padding:12px 14px;box-shadow:0 4px 14px rgba(0,0,0,.08);max-width:92%;
      font-size:14px;line-height:1.3;
    }
    .pin b{display:block;margin-bottom:2px}

    /* Info + Form */
    .side{display:flex;flex-direction:column;gap:16px}
    .box{padding:18px}
    .box h3{margin:0 0 8px;font-size:18px;letter-spacing:.3px}
    .box p{margin:.25rem 0;color:var(--muted)}
    .tel{display:flex;gap:8px;align-items:center;color:inherit;text-decoration:none}
    .tel:hover{color:var(--brand)}
    .muted{color:var(--muted)}
    .sep{height:1px;background:#f1f5f9;margin:8px 0}

    form{display:grid;gap:10px}
    label{font-size:14px;color:#374151}
    input, textarea, select{
      width:100%;padding:10px 12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;
      font:inherit;outline:none;
    }
    textarea{resize:vertical;min-height:110px}
    .row{display:grid;gap:10px;grid-template-columns:1fr 1fr}
    @media (max-width:600px){ .row{grid-template-columns:1fr} }
    .btn{
      appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:700;
      background:linear-gradient(180deg,#38bdf8,#0284c7);color:#fff;cursor:pointer;
      box-shadow:0 8px 20px rgba(2,132,199,.35);
    }
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .note{font-size:12px;color:var(--muted)}
    .toast{
      position:fixed;right:16px;bottom:16px;background:#0ea5e9;color:#fff;padding:10px 14px;border-radius:10px;
      box-shadow:0 8px 20px rgba(2,132,199,.35);opacity:0;transform:translateY(8px);
      transition:.3s ease;z-index:50
    }
    .toast.show{opacity:1;transform:translateY(0)}
  </style>
</head>
<body>

  <header>
    <h1>PC Store ‚Äî Contacto</h1>
  </header>

  <div id="nav-placeholder"></div>

  <main class="wrap">
    <section class="contact-grid">

      <!-- Columna izquierda: Mapa -->
      <div class="card map">
        <!-- EDITA el lugar en el src del iframe si lo deseas -->
        <iframe
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          src="https://www.google.com/maps?q=Plaza%20Mundo%20Soyapango&output=embed">
        </iframe>

        <div class="pin">
          <b>PC Store ‚Äî Sucursal Soyapango</b>
          <div>Direcci√≥n: Local 21, Plaza Mundo, Soyapango</div>
          <div>Horario: Lun‚ÄìS√°b 9:00‚Äì18:00</div>
          <a class="muted" target="_blank" href="https://www.google.com/maps/search/?api=1&query=Plaza%20Mundo%20Soyapango">C√≥mo llegar ‚Üó</a>
        </div>
      </div>

      <!-- Columna derecha: tel√©fonos + formulario -->
      <aside class="side">
        <div class="card box">
          <h3>üìû Ll√°manos</h3>
          <a class="tel" href="tel:+50377777777">General: +503 7777-7777</a>
          <a class="tel" href="tel:+50376666666">Ventas: +503 7666-6666</a>
          <a class="tel" href="https://wa.me/50370000000" target="_blank">WhatsApp: +503 7000-0000</a>
          <div class="sep"></div>
          <h3>‚úâÔ∏è Correo</h3>
          <p><a href="mailto:pcstore@gmail.com">pcstore@gmail.com</a></p>
        </div>

        <div class="card box">
          <h3>üì¨ Env√≠anos un mensaje</h3>
          <form id="contacto">
            <div class="row">
              <div>
                <label for="nombre">Nombre</label>
                <input id="nombre" name="nombre" placeholder="Tu nombre" required>
              </div>
              <div>
                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="tucorreo@dominio.com" required>
              </div>
            </div>
            <div class="row">
              <div>
                <label for="asunto">Asunto</label>
                <input id="asunto" name="asunto" placeholder="Cotizaci√≥n, soporte, garant√≠a‚Ä¶">
              </div>
              <div>
                <label for="categoria">Categor√≠a</label>
                <select id="categoria" name="categoria">
                  <option value="ventas">Ventas</option>
                  <option value="soporte">Soporte</option>
                  <option value="garantia">Garant√≠a</option>
                </select>
              </div>
            </div>
            <div>
              <label for="mensaje">Comentarios</label>
              <textarea id="mensaje" name="mensaje" placeholder="Cu√©ntanos en qu√© podemos ayudarte" required></textarea>
            </div>
            <button class="btn" type="submit" id="btnSend">ENVIAR</button>
            <div class="note">Tus datos no se comparten con terceros.</div>
          </form>
        </div>
      </aside>
    </section>
  </main>

  <div id="toast" class="toast">¬°Mensaje enviado!</div>

  <script>
    // Ajusta al endpoint de tu json-server si lo deseas
    const API_MSG = 'http://172.27.28.148:3000/mensajes'; 

    const form = document.getElementById('contacto');
    const btn = document.getElementById('btnSend');
    const toast = document.getElementById('toast');

    function showToast(text='¬°Mensaje enviado!'){
      toast.textContent = text;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 2800);
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      btn.disabled = true;

      const fd = new FormData(form);
      const payload = {
        nombre: fd.get('nombre'),
        email: fd.get('email'),
        asunto: fd.get('asunto') || 'Contacto web',
        categoria: fd.get('categoria') || 'ventas',
        mensaje: fd.get('mensaje'),
        fecha: new Date().toISOString()
      };

      try {
        // Intenta guardar en json-server
        const r = await fetch(API_MSG, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });
        if(!r.ok) throw new Error('json-server no disponible');
        showToast('¬°Gracias! Te responderemos pronto.');
        form.reset();
      } catch (err){
        // Fallback: guarda local y muestra aviso
        const key = 'pcstore_contact_offline';
        const prev = JSON.parse(localStorage.getItem(key) || '[]');
        prev.push(payload);
        localStorage.setItem(key, JSON.stringify(prev));
        showToast('Guardado localmente. Se enviar√° luego.');
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>

